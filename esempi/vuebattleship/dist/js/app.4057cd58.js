(function(e){function t(t){for(var a,o,s=t[0],c=t[1],d=t[2],u=0,p=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,d||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,s=1;s<r.length;s++){var c=r[s];0!==n[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},i=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0047":function(e,t,r){"use strict";var a=r("c562"),n=r.n(a);n.a},"0152":function(e,t,r){"use strict";var a=r("5df3"),n=r.n(a);n.a},"034f":function(e,t,r){"use strict";var a=r("8a23"),n=r.n(a);n.a},"3cda":function(e,t,r){},5357:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("TheNavBar",{on:{"show-game-menu":e.handleShowGameMenu}}),r("v-content",[r("TheGame",{ref:"game",on:{round:e.handleRound}}),r("TheGameMenu",{attrs:{isOpen:e.isGameMenuOpen,options:e.gameMenuOptions},on:{"start-new-game":e.handleNewGame,"resume-game":e.handleResumeGame}}),r("TheGameBoardRedactor",{attrs:{isOpen:e.isGameBoardRedactorOpen},on:{"start-game":e.handleStartGame}})],1)],1)},i=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",[r("button",{staticClass:"menu",on:{click:function(t){return e.$emit("show-game-menu")}}},[e._v("Menu")]),r("h1",{staticClass:"logo"},[e._v("Battleship")]),r("button",{staticClass:"github-icon",on:{click:e.handleOpenRepo}},[r("v-icon",{attrs:{large:""}},[e._v("mdi-github-circle")])],1)])},s=[],c={name:"TheNavBar",methods:{handleOpenRepo:function(){window.open("https://github.com/igorashs/vue-battleship","_blank")}}},d=c,l=(r("0152"),r("2877")),u=r("6544"),p=r.n(u),h=r("132d"),f=Object(l["a"])(d,o,s,!1,null,"f7b8d064",null),y=f.exports;p()(f,{VIcon:h["a"]});var m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{persistent:"","overlay-opacity":"0.8"},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[r("div",{staticClass:"menu-container"},[r("button",{staticClass:"btn",on:{click:function(t){return e.$emit("start-new-game")}}},[e._v(" New Game ")]),r("button",{staticClass:"btn",class:{disable:e.options.resume.isDisabled},on:{click:function(t){return e.$emit("resume-game")}}},[e._v(" Resume ")]),r("button",{staticClass:"btn source",on:{click:e.handleOpenRepo}},[e._v(" Source Code ")]),r("p",{staticClass:"author"},[e._v("Made by igorash")])])])},g=[],x={name:"TheGameMenu",props:{isOpen:Boolean,options:Object},methods:{handleOpenRepo:function(){window.open("https://github.com/igorashs/vue-battleship","_blank")}}},v=x,b=(r("b363"),r("169a")),S=Object(l["a"])(v,m,g,!1,null,"3d0ee4f8",null),O=S.exports;p()(S,{VDialog:b["a"]});var C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{persistent:"","overlay-opacity":"0.8"},model:{value:e.resetAndDisplay,callback:function(t){e.resetAndDisplay=t},expression:"resetAndDisplay"}},[r("div",{staticClass:"container"},[r("h2",[e._v("Arrange your board")]),r("div",{staticClass:"redactor"},[r("div",{staticClass:"board-container"},[r("div",{staticClass:"cords letters"},e._l(e.lettersCords,(function(t){return r("div",{key:t,staticClass:"letter"},[e._v(e._s(t))])})),0),r("div",{staticClass:"cords numbers"},e._l(e.numbersCords,(function(t){return r("div",{key:t,staticClass:"number"},[e._v(e._s(t))])})),0),r("div",{staticClass:"board"},e._l(Math.pow(e.MAX+1,2),(function(t,a){return r("div",{key:e.keys[e.MIN+a],staticClass:"spot",attrs:{"data-cord":e.stringifiedCords[e.MIN+a]},on:{dragover:function(t){return t.preventDefault(),e.handleDragOver(t)},dragleave:e.handleDragLeave,drop:function(t){return t.preventDefault(),e.handleDrop(t)}}})})),0)]),r("div",{staticClass:"selection"},e._l(e.ships,(function(t,a){return r("div",{key:a,staticClass:"ship-container",on:{dragstart:e.handleDragStart}},[r("span",{staticClass:"count"},[e._v(e._s(t)+"x")]),r("div",{ref:a,refInFor:!0,staticClass:"ship",attrs:{"data-length":e.getShipLength(a),"data-position":"y",draggable:"true"}},e._l(e.getShipLength(a),(function(e){return r("div",{key:e,staticClass:"part"})})),0)])})),0)]),r("div",{staticClass:"tips-container"},[r("v-icon",{staticClass:"tip-ico"},[e._v("mdi-lightbulb-on")]),r("div",{staticClass:"tips"},[r("span",[e._v("* Drag and drop the ships")]),r("span",[e._v("* Click on a ship on the board to switch direction")])])],1),r("div",{staticClass:"options"},[r("button",{on:{click:e.handleRandomPlacement}},[e._v("Random")]),r("button",{on:{click:function(t){return e.resetBoard()}}},[e._v("Reset")]),r("button",{class:{disable:0!==e.totalShips},on:{click:e.onClickStartBtn}},[e._v("Start")])])])])},B=[],w=(r("a4d3"),r("99af"),r("4de4"),r("7db0"),r("a15b"),r("d81d"),r("4fad"),r("e439"),r("dbb4"),r("b64b"),r("466d"),r("159b"),r("2909")),E=r("ade3");r("c740"),r("a9e3"),r("9129");function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){Object(E["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=10,N={ship4:1,ship3:2,ship2:3,ship1:4},R=9,D=0,G=function(e){var t=e.x,r=e.y,a=function(e){return D<=e&&e<=R},n=function(e){return!Number.isNaN(e)&&"number"===typeof e&&a(e)};return n(t)&&n(r)},I=function(e,t,r,a){if(a){for(var n=e.y;n<=t.y;n+=1)if("s"===r[e.x][n]||"B"===r[e.x][n])return!1;for(var i=e.y-1;i<=t.y+1;i+=1)if(G({x:e.x-1,y:i})&&"s"===r[e.x-1][i])return!1;for(var o=e.y-1;o<=t.y+1;o+=1)if(G({x:e.x+1,y:o})&&"s"===r[e.x+1][o])return!1;return(!G({x:e.x,y:e.y-1})||"s"!==r[e.x][e.y-1])&&(!G({x:e.x,y:t.y+1})||"s"!==r[e.x][t.y+1])}for(var s=e.x;s<=t.x;s+=1)if("s"===r[s][e.y]||"B"===r[s][e.y])return!1;for(var c=e.x-1;c<=t.x+1;c+=1)if(G({x:c,y:e.y-1})&&"s"===r[c][e.y-1])return!1;for(var d=e.x+1;d<=t.x+1;d+=1)if(G({x:d,y:e.y+1})&&"s"===r[d][e.y+1])return!1;return(!G({x:e.x-1,y:e.y})||"s"!==r[e.x-1][e.y])&&(!G({x:e.x+1,y:e.y})||"s"!==r[e.x+1][e.y])},T=function(e,t,r){var a=r.x,n=r.y,i=r.isVertical;if(e&&G({x:a,y:n})){var o={x:a,y:n},s=i?{x:a,y:n+e.getLength()-1}:{x:a+e.getLength()-1,y:n};return G(s)&&I(o,s,t,i)}return!1},L=function(e,t){var r=t.x,a=t.y,n=t.isVertical,i=[],o={x:r,y:a};if(n){for(var s={x:r,y:a+e.getLength()-1},c=o.y;c<=s.y;c+=1)i.push({x:o.x,y:c});return i}for(var d={x:r+e.getLength()-1,y:a},l=o.x;l<=d.x;l+=1)i.push({x:l,y:o.y});return i},M=function(e,t){var r="ship".concat(e.getLength());return t[r]+1<=N[r]},_=function(e,t){var r=j({},t);return r["ship".concat(e.getLength())]+=1,j({},r)},A=function(e,t){var r=j({},t);return r["ship".concat(e.getLength())]-=1,j({},r)},J=function(e,t,r){var a=r.x,n=r.y,i=r.isVertical,o={x:a,y:n},s=JSON.parse(JSON.stringify(t));if(i){for(var c={x:a,y:n+e.getLength()-1},d=o.y;d<=c.y;d+=1)s[o.x][d]="s";for(var l=o.y-1;l<=c.y+1;l+=1)G({x:o.x-1,y:l})&&(s[o.x-1][l]="B");for(var u=o.y-1;u<=c.y+1;u+=1)G({x:o.x+1,y:u})&&(s[o.x+1][u]="B");return G({x:o.x,y:o.y-1})&&(s[o.x][o.y-1]="B"),G({x:o.x,y:c.y+1})&&(s[o.x][c.y+1]="B"),s}for(var p={x:a+e.getLength()-1,y:n},h=o.x;h<=p.x;h+=1)s[h][o.y]="s";for(var f=o.x-1;f<=p.x+1;f+=1)G({x:f,y:o.y-1})&&(s[f][o.y-1]="B");for(var y=o.x-1;y<=p.x+1;y+=1)G({x:y,y:o.y+1})&&(s[y][o.y+1]="B");return G({x:o.x-1,y:o.y})&&(s[o.x-1][o.y]="B"),G({x:p.x+1,y:o.y})&&(s[p.x+1][o.y]="B"),s},V=function(e,t){var r=t.x,a=t.y;return!(!G({x:r-1,y:a})||"s"!==e[r-1][a])||(!(!G({x:r+1,y:a})||"s"!==e[r+1][a])||(!(!G({x:r,y:a-1})||"s"!==e[r][a-1])||(!(!G({x:r-1,y:a-1})||"s"!==e[r-1][a-1])||(!(!G({x:r+1,y:a-1})||"s"!==e[r+1][a-1])||(!(!G({x:r,y:a+1})||"s"!==e[r][a+1])||(!(!G({x:r-1,y:a+1})||"s"!==e[r-1][a+1])||!(!G({x:r+1,y:a+1})||"s"!==e[r+1][a+1])))))))},$=function(e,t){var r=e.ship,a=e.isVertical,n=e.cords[0],i=n.x,o=n.y,s={x:i,y:o},c=JSON.parse(JSON.stringify(t));if(a){for(var d={x:i,y:o+r.getLength()-1},l=s.y;l<=d.y;l+=1)c[s.x][l]="~";for(var u=s.y-1;u<=d.y+1;u+=1)G({x:s.x-1,y:u})&&(V(c,{x:s.x-1,y:u})||(c[s.x-1][u]="~"));for(var p=s.y-1;p<=d.y+1;p+=1)G({x:s.x+1,y:p})&&(V(c,{x:s.x+1,y:p})||(c[s.x+1][p]="~"));return G({x:s.x,y:s.y-1})&&(V(c,{x:s.x,y:s.y-1})||(c[s.x][s.y-1]="~")),G({x:s.x,y:d.y+1})&&(V(c,{x:s.x,y:d.y+1})||(c[s.x][d.y+1]="~")),c}for(var h={x:i+r.getLength()-1,y:o},f=s.x;f<=h.x;f+=1)c[f][s.y]="~";for(var y=s.x-1;y<=h.x+1;y+=1)G({x:y,y:s.y-1})&&(V(c,{x:y,y:s.y-1})||(c[y][s.y-1]="~"));for(var m=s.x-1;m<=h.x+1;m+=1)G({x:m,y:s.y+1})&&(V(c,{x:m,y:s.y+1})||(c[m][s.y+1]="~"));return G({x:s.x-1,y:s.y})&&(V(c,{x:s.x-1,y:s.y})||(c[s.x-1][s.y]="~")),G({x:h.x+1,y:s.y})&&(V(c,{x:h.x+1,y:s.y})||(c[h.x+1][s.y]="~")),c},q=function(e,t){var r=e.ship,a=e.isVertical,n=e.cords[0],i=n.x,o=n.y,s={x:i,y:o},c=JSON.parse(JSON.stringify(t)),d=[];if(a){for(var l={x:i,y:o+r.getLength()-1},u=s.y-1;u<=l.y+1;u+=1)G({x:s.x-1,y:u})&&(c[s.x-1][u]="*",d.push({x:s.x-1,y:u}));for(var p=s.y-1;p<=l.y+1;p+=1)G({x:s.x+1,y:p})&&(c[s.x+1][p]="*",d.push({x:s.x+1,y:p}));return G({x:s.x,y:s.y-1})&&(c[s.x][s.y-1]="*",d.push({x:s.x,y:s.y-1})),G({x:s.x,y:l.y+1})&&(c[s.x][l.y+1]="*",d.push({x:s.x,y:l.y+1})),{newBoard:c,clearedBorders:d}}for(var h={x:i+r.getLength()-1,y:o},f=s.x-1;f<=h.x+1;f+=1)G({x:f,y:s.y-1})&&(c[f][s.y-1]="*",d.push({x:f,y:s.y-1}));for(var y=s.x-1;y<=h.x+1;y+=1)G({x:y,y:s.y+1})&&(c[y][s.y+1]="*",d.push({x:y,y:s.y+1}));return G({x:s.x-1,y:s.y})&&(c[s.x-1][s.y]="*",d.push({x:s.x-1,y:s.y})),G({x:h.x+1,y:s.y})&&(c[h.x+1][s.y]="*",d.push({x:h.x+1,y:s.y})),{newBoard:c,clearedBorders:d}},H=function(){return Math.floor(Math.random()*(R+1))},F=function(){return!!Math.floor(2*Math.random())},z=function(e,t){var r=t.x,a=t.y;return e.find((function(e){return e.cords.find((function(e){return e.x===r&&e.y===a}))}))},X=function(e,t){var r=t.x,a=t.y;return e.cords.findIndex((function(e){return e.x===r&&e.y===a}))},W=function(e,t){var r=t.x,a=t.y;return e.filter((function(e){return!e.cords.find((function(e){return e.x===r&&e.y===a}))}))},Y=function(){var e=[["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"]],t=!1,r=0,a=0,n=[],i={ship4:0,ship3:0,ship2:0,ship1:0};return{isReady:function(){return r===P&&t},setBoardToReady:function(){return r===P&&(t=!0),this},isAllShipsSunk:function(){return!!this.isReady()&&r===a},getAliveShipsCount:function(){return r-a},placeShipAt:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.x,s=void 0===o?-1:o,c=a.y,d=void 0===c?-1:c,l=a.isVertical,u=void 0!==l&&l;if(!this.isReady()&&T(t,e,{x:s,y:d,isVertical:u})&&M(t,i)){i=_(t,i);var p=L(t,{x:s,y:d,isVertical:u});return n.push({ship:t,cords:p,isVertical:u}),e=J(t,e,{x:s,y:d,isVertical:u}),r+=1,!0}return!1},replaceShipFrom:function(t){var a=t.cx,o=void 0===a?-1:a,s=t.cy,c=void 0===s?-1:s,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=d.nx,u=void 0===l?-1:l,p=d.ny,h=void 0===p?-1:p,f=d.isVertical,y=void 0!==f&&f;if(!this.isReady()){var m=z(n,{x:o,y:c});if(m){var g=JSON.parse(JSON.stringify(e)),x=Object(w["a"])(n),v=j({},i);return e=$(m,e),n=W(n,{x:o,y:c}),i=A(m.ship,i),r-=1,!!this.placeShipAt(m.ship,{x:u,y:h,isVertical:y})||(e=g,n=x,i=v,r+=1,!1)}}return!1},placeShipRandom:function(e){if(!M(e,i))return!1;var t,r,a;do{t=H(),r=H(),a=F()}while(!this.placeShipAt(e,{x:t,y:r,isVertical:a}));return{x:t,y:r,isVertical:a}},receiveAttack:function(t){var r=t.x,i=t.y;if(this.isReady()&&G({x:r,y:i})){if("s"===e[r][i]){var o=z(n,{x:r,y:i}),s=X(o,{x:r,y:i});if(o.ship.hitAt({position:s+1}).isSunk()){a+=1,e[r][i]="x";var c=q(o,e),d=c.newBoard,l=c.clearedBorders;return e=d,{damagedShipData:o,clearedBorders:l}}return e[r][i]="x",!0}return"*"===e[r][i]||"x"===e[r][i]?"*":(e[r][i]="*",!1)}return!1}}},K=Y,Q=4,U=1,Z=function(e){return e>Q?Q:e<U?U:e},ee=function(e){return U<=e&&e<=Q},te=function(e){var t=e.length,r=[],a=Z(t);return{getLength:function(){return a},getLives:function(){return[].concat(r)},isSunk:function(){return r.join("").length===a},hitAt:function(e){var t=e.position;return ee(t)&&(r[t-1]="x"),this}}},re=te;function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){Object(E["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ie={name:"TheGameBoardRedactor",props:{isOpen:Boolean},data:function(){return{MAX:R,MIN:D,ships:ne({},N),board:K(),draggedShip:null}},computed:{resetAndDisplay:function(){return this.isOpen&&this.resetBoard(),this.isOpen},cords:function(){for(var e=[],t=this.MIN;t<=this.MAX;t+=1)for(var r=this.MIN;r<=this.MAX;r+=1)e.push({x:r,y:t});return e},keys:function(){return this.cords.map((function(e,t){return"".concat(JSON.stringify(e),"-").concat(t)}))},stringifiedCords:function(){return this.cords.map((function(e){return JSON.stringify(e)}))},lettersCords:function(){for(var e=[],t=this.MIN;t<=this.MAX;t+=1)e.push(String.fromCharCode(65+t));return e},numbersCords:function(){for(var e=[],t=this.MIN+1;t<=this.MAX+1;t+=1)e.push(t);return e},totalShips:function(){return Object.entries(this.ships).reduce((function(e,t){return e+t[1]}),0)}},methods:{onClickStartBtn:function(){var e=document.querySelector(".board-container").cloneNode(!0),t=e.querySelectorAll(".ship");t.forEach((function(e){e.removeAttribute("draggable");var t="x"===e.dataset.position,r=JSON.parse(e.parentElement.dataset.cord),a=r.x,n=r.y;e.querySelectorAll(".part").forEach((function(e,r){var i=t?{x:a,y:n+r}:{x:a+r,y:n};e.dataset.cord=JSON.stringify(i)}))})),this.board.setBoardToReady();var r=ne({},this.board);this.resetBoard();var a=document.querySelector(".board-container").cloneNode(!0);this.board.placeShipRandom(re({length:4})),this.board.placeShipRandom(re({length:3})),this.board.placeShipRandom(re({length:3})),this.board.placeShipRandom(re({length:2})),this.board.placeShipRandom(re({length:2})),this.board.placeShipRandom(re({length:2})),this.board.placeShipRandom(re({length:1})),this.board.placeShipRandom(re({length:1})),this.board.placeShipRandom(re({length:1})),this.board.placeShipRandom(re({length:1})),this.board.setBoardToReady();var n=ne({},this.board);this.$emit("start-game",r,e,n,a)},getShipLength:function(e){return+e.match(/\d/g).join("")},resetBoard:function(){document.querySelectorAll(".spot > .ship").forEach((function(e){return e.remove()})),this.board=K(),this.ships=ne({},N)},handleChangePosition:function(e){var t=e.currentTarget,r=JSON.parse(t.dataset.cord),a="x"===t.dataset.position;if(this.board.replaceShipFrom({cx:r.x,cy:r.y},{nx:r.x,ny:r.y,isVertical:!a})){var n="x"===t.dataset.position?"y":"x";t.dataset.position=n,t.style["grid-auto-flow"]="x"===n?"row":"column"}},handleShipInitialCord:function(e){var t=JSON.parse(e.currentTarget.dataset.cord),r=e.currentTarget.dataset.position;e.dataTransfer.setData("text/plain",JSON.stringify({cord:t,cloned:!0,position:r})),this.draggedShip=e.currentTarget},handleDragStart:function(e){var t=e.target.dataset.position,r=+e.target.dataset.length;e.dataTransfer.setData("text/plain",JSON.stringify({length:r,position:t}))},handleDragOver:function(e){e.target.classList.add("over")},handleDragLeave:function(e){e.target.classList.remove("over")},handleDrop:function(e){var t,r;e.target.classList.remove("over");try{r=JSON.parse(e.dataTransfer.getData("text/plain")),JSON.parse(e.target.dataset.cord),t=!0}catch(y){t=!1}if(t&&r)if(r.cloned){var a=JSON.parse(e.target.dataset.cord),n=r,i=n.cord,o=n.position,s="x"===o;this.board.replaceShipFrom({cx:i.x,cy:i.y},{nx:a.x,ny:a.y,isVertical:s})&&(this.draggedShip.dataset.cord=e.target.dataset.cord,e.target.appendChild(this.draggedShip),this.draggedShip=null)}else{var c=r,d=c.length,l=c.position,u=JSON.parse(e.target.dataset.cord),p="x"===l;if(this.board.placeShipAt(re({length:d}),ne({},u,{isVertical:p}))){var h="ship".concat(d),f=this.$refs[h][0].cloneNode(!0);f.dataset.cord=e.target.dataset.cord,f.dataset.position=l,this.ships[h]-=1,f.style.position="absolute",e.target.appendChild(f),f.addEventListener("dragstart",this.handleShipInitialCord),f.addEventListener("click",this.handleChangePosition)}}},handleRandomPlacement:function(){var e=this,t=function(t,r){var a=t.x,n=t.y,i=t.isVertical,o="ship".concat(r),s=e.$refs[o][0].cloneNode(!0);s.dataset.cord=JSON.stringify({x:a,y:n}),s.dataset.position=i?"x":"y",e.ships[o]-=1,s.style.position="absolute",s.style["grid-auto-flow"]=i?"row":"column",Object(w["a"])(document.querySelectorAll(".spot")).find((function(e){return e.dataset.cord===JSON.stringify({x:a,y:n})})).appendChild(s),s.addEventListener("dragstart",e.handleShipInitialCord),s.addEventListener("click",e.handleChangePosition)};this.resetBoard(),t(ne({},this.board.placeShipRandom(re({length:4}))),4),t(ne({},this.board.placeShipRandom(re({length:3}))),3),t(ne({},this.board.placeShipRandom(re({length:3}))),3),t(ne({},this.board.placeShipRandom(re({length:2}))),2),t(ne({},this.board.placeShipRandom(re({length:2}))),2),t(ne({},this.board.placeShipRandom(re({length:2}))),2),t(ne({},this.board.placeShipRandom(re({length:1}))),1),t(ne({},this.board.placeShipRandom(re({length:1}))),1),t(ne({},this.board.placeShipRandom(re({length:1}))),1),t(ne({},this.board.placeShipRandom(re({length:1}))),1)}}},oe=ie,se=(r("56e3"),Object(l["a"])(oe,C,B,!1,null,"3617e501",null)),ce=se.exports;p()(se,{VDialog:b["a"],VIcon:h["a"]});var de=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},le=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"game-wrapper"},[r("div",{staticClass:"game-container"},[r("div",{staticClass:"pl"}),r("div",{staticClass:"game-info"}),r("div",{staticClass:"pc"})])])}],ue={name:"TheGame",data:function(){return{isGameInitiated:!1,plElement:null,pcElement:null,plBoardElement:null,pcBoardElement:null,plBoardInfoElement:null,pcBoardInfoElement:null,gameInfo:null,pl:null,pc:null}},methods:{initTheGame:function(e,t,r,a){this.plElement=document.querySelector(".pl"),this.pcElement=document.querySelector(".pc"),this.gameInfo=document.querySelector(".game-info"),this.plBoardElement=e,this.pcBoardElement=t,this.pl=r,this.pc=a,this.renderTheBoards(),this.renderTheBoardsInfo(),this.updateTheBoardsInfo(),this.updateGameInfo("Your Turn!"),this.addPcBoardEvent(),this.isGameInitiated=!0},renderTheBoards:function(){this.plElement.appendChild(this.plBoardElement),this.pcElement.appendChild(this.pcBoardElement)},resetTheGame:function(){this.isGameInitiated&&(this.updateGameInfo(""),this.plBoardElement.remove(),this.pcBoardElement.remove(),this.plBoardInfoElement.remove(),this.pcBoardInfoElement.remove())},addPcBoardEvent:function(){var e=this;this.pcBoardElement.addEventListener("click",(function(t){t.target.classList.contains("spot")&&e.$emit("round",t.target.dataset.cord)}))},updatePcBoard:function(e,t){var r=this;if(!0===t){var a=this.pcBoardElement.querySelector(".spot[data-cord=".concat(JSON.stringify(e),"]"));a.append("x"),a.style.backgroundColor="rgb(248, 39, 39)",a.style.lineHeight="1",a.style.pointerEvents="none",a.classList.toggle("resize")}if(!1===t){var n=this.pcBoardElement.querySelector(".spot[data-cord=".concat(JSON.stringify(e),"]"));n.append("*"),n.style.pointerEvents="none",n.classList.toggle("resize")}if(t.damagedShipData){var i=t.damagedShipData,o=t.clearedBorders,s=document.createElement("div");s.classList.add("ship");for(var c=0;c<i.ship.getLength();c+=1){var d=document.createElement("div");d.classList.add("part"),d.append("x"),s.appendChild(d)}s.classList.toggle("resize");var l=this.pcBoardElement.querySelector(".spot[data-cord=".concat(JSON.stringify(JSON.stringify(i.cords[0])),"]"));s.style["grid-auto-flow"]=i.isVertical?"row":"column",s.style.position="absolute",l.firstChild&&l.firstChild.remove(),l.appendChild(s),o.forEach((function(e){var t=r.pcBoardElement.querySelector(".spot[data-cord=".concat(JSON.stringify(JSON.stringify(e)),"]"));t.firstChild||(t.append("*"),t.style.pointerEvents="none",t.classList.toggle("resize"))}))}},updatePlBoard:function(e,t){var r=this;if(!0===t||t.damagedShipData){var a=this.plBoardElement.querySelector(".part[data-cord=".concat(JSON.stringify(e),"]"));if(a.append("x"),a.style.backgroundColor="rgb(218, 100, 100)",a.classList.toggle("resize"),t.damagedShipData){var n=t.clearedBorders;n.forEach((function(e){var t=r.plBoardElement.querySelector(".spot[data-cord=".concat(JSON.stringify(JSON.stringify(e)),"]"));t.firstChild||(t.append("*"),t.classList.toggle("resize"))}))}}if(!1===t){var i=this.plBoardElement.querySelector(".spot[data-cord=".concat(JSON.stringify(e),"]"));i.append("*"),i.classList.toggle("resize")}},updateTheBoardsInfo:function(){var e=function(e,t){var r=t.firstElementChild,a=t.lastElementChild,n=e.getName(),i=e.getBoard().getAliveShipsCount();"".concat(r.textContent," Board")!==n&&(r.textContent="".concat(n," Board")),"Alive Ships: ".concat(a.textContent)!==i&&(a.textContent="Alive Ships: ".concat(i))};e(this.pl,this.plBoardInfoElement),e(this.pc,this.pcBoardInfoElement)},renderTheBoardsInfo:function(){var e=function(){var e=document.createElement("div"),t=document.createElement("h3"),r=document.createElement("h4");return e.classList.add("board-info"),t.classList.add("name"),r.classList.add("alive-ships"),e.appendChild(t),e.appendChild(r),e};this.plBoardInfoElement=e(),this.pcBoardInfoElement=e(),this.plElement.appendChild(this.plBoardInfoElement),this.pcElement.appendChild(this.pcBoardInfoElement)},updateGameInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgb(43, 197, 87)";this.gameInfo.textContent=e,this.gameInfo.style.color=t,this.gameInfo.classList.contains("pulse")||(this.gameInfo.classList.add("pulse"),this.gameInfo.classList.add("top-bot-borders")),e||(this.gameInfo.classList.remove("pulse"),this.gameInfo.classList.remove("top-bot-borders"))},disablePcBoard:function(){this.pcBoardElement.style.pointerEvents="none"},enablePcBoard:function(){this.pcBoardElement.style.pointerEvents="auto"}}},pe=ue,he=(r("0047"),Object(l["a"])(pe,de,le,!1,null,"b124e27c",null)),fe=he.exports;r("b0c0");function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){Object(E["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ge=function(e,t){return e||t?!e&&t?"PC-Player":e:"Player"},xe=function(e){var t=e.player,r=e.x,a=e.y;return t.receiveAttack({x:r,y:a})},ve={isVertical:null,adjacentCords:null,backwardCord:null,forwardCord:null,initCord:null,damagedShipsCords:null,isBackWardFirst:null},be=function(e){var t,r,a,n=e.player,i=function(){var e=ve.backwardCord;r=e.x,a=e.y,ve.isVertical?(a-=1,ve.damagedShipsCords.find((function(e){return e.x===r&&e.y===a}))&&(a-=1)):(r-=1,ve.damagedShipsCords.find((function(e){return e.x===r&&e.y===a}))&&(r-=1)),G({x:r,y:a})?(ve.backwardCord={x:r,y:a},t=n.receiveAttack({x:r,y:a}),!0===t&&ve.damagedShipsCords.push({x:r,y:a})):(ve.backwardCord=null,t="*"),"*"!==t&&!1!==t||(ve.backwardCord=null)},o=function(){var e=ve.forwardCord;r=e.x,a=e.y,ve.isVertical?(a+=1,ve.damagedShipsCords.find((function(e){return e.x===r&&e.y===a}))&&(a+=1)):(r+=1,ve.damagedShipsCords.find((function(e){return e.x===r&&e.y===a}))&&(r+=1)),G({x:r,y:a})?(ve.forwardCord={x:r,y:a},t=n.receiveAttack({x:r,y:a}),!0===t&&ve.damagedShipsCords.push({x:r,y:a})):(ve.forwardCord=null,t="*"),"*"!==t&&!1!==t||(ve.forwardCord=null)};do{if(ve.adjacentCords){var s=Math.floor(Math.random()*ve.adjacentCords.length),c=ve.adjacentCords[s];if(r=c.x,a=c.y,t=n.receiveAttack({x:r,y:a}),!0===t){ve.isVertical=ve.initCord.y!==a;var d=ve.initCord;ve.backwardCord=me({},d),ve.forwardCord=me({},d),ve.isBackWardFirst=1===Math.floor(2*Math.random()),ve.damagedShipsCords.push({x:r,y:a}),ve.adjacentCords=null}}else!ve.backwardCord||!ve.isBackWardFirst&&ve.forwardCord?!ve.forwardCord||ve.isBackWardFirst&&ve.backwardCord?(r=H(),a=H(),t=n.receiveAttack({x:r,y:a})):o():i()}while("*"===t);return!0!==t||ve.backwardCord||ve.forwardCord||ve.adjacentCords||(ve.initCord={x:r,y:a},ve.damagedShipsCords=[],ve.adjacentCords=[],ve.damagedShipsCords.push({x:r,y:a}),G({x:r-1,y:a})&&ve.adjacentCords.push({x:r-1,y:a}),G({x:r+1,y:a})&&ve.adjacentCords.push({x:r+1,y:a}),G({x:r,y:a-1})&&ve.adjacentCords.push({x:r,y:a-1}),G({x:r,y:a+1})&&ve.adjacentCords.push({x:r,y:a+1})),t.damagedShipData&&(ve.isVertical=null,ve.adjacentCords=null,ve.backwardCord=null,ve.forwardCord=null,ve.initCord=null,ve.damagedShipsCords=null,ve.isBackWardFirst=null),{attackInfo:t,cord:{x:r,y:a}}},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=void 0===t?"":t,a=e.board,n=e.isPc,i=void 0!==n&&n;if(!a)throw new Error("Player must have a board");if(!a.isReady())throw new Error("Player must have a board with ships");var o=ge(r,i),s=a.receiveAttack.bind(a),c=i?be:xe;return{getName:function(){return o},getBoard:function(){return me({},a)},attack:c,receiveAttack:s}},Oe=Se,Ce={name:"App",components:{TheGame:fe,TheNavBar:y,TheGameMenu:O,TheGameBoardRedactor:ce},data:function(){return{isGameMenuOpen:!0,isGameBoardRedactorOpen:!1,gameMenuOptions:{resume:{isDisabled:!0}},pl:null,pc:null,plHasDamaged:!1,pcHasDamaged:!1,gameHasAwinner:!1}},methods:{hideGameMenu:function(){this.isGameMenuOpen=!1},handleShowGameMenu:function(){this.isGameMenuOpen=!0},openGameBoardRedactor:function(){this.isGameBoardRedactorOpen=!0},closeGameBoardRedactor:function(){this.isGameBoardRedactorOpen=!1},handleNewGame:function(){this.gameHasAwinner=!1,this.gameMenuOptions.resume.isDisabled=!1,this.hideGameMenu(),this.openGameBoardRedactor(),this.$refs.game.resetTheGame()},handleResumeGame:function(){this.hideGameMenu()},handleStartGame:function(e,t,r,a){this.closeGameBoardRedactor(),this.pl=Oe({board:e}),this.pc=Oe({board:r,isPc:!0}),this.$refs.game.initTheGame(t,a,this.pl,this.pc)},handleRound:function(e){var t=this;if(!this.gameHasAwinner){if(this.plHasDamaged=this.makePlTurn(e),this.$refs.game.updateTheBoardsInfo(),this.pc.getBoard().isAllShipsSunk())return this.gameHasAwinner=!0,this.gameMenuOptions.resume.isDisabled=!0,this.$refs.game.updateGameInfo("Congratulations you won The Game","rgb(43, 197, 87)"),void setTimeout(this.handleShowGameMenu,3e3);if(this.plHasDamaged)return;this.$refs.game.updateGameInfo("Pc Turn!","rgb(226, 54, 54)"),this.$refs.game.disablePcBoard();var r=function e(r){setTimeout((function(){if(t.pcHasDamaged=t.makePcTurn(),t.$refs.game.updateTheBoardsInfo(),t.pl.getBoard().isAllShipsSunk())return t.gameHasAwinner=!0,t.gameMenuOptions.resume.isDisabled=!0,t.$refs.game.updateGameInfo("Pc won The Game!","rgb(226, 54, 54)"),void setTimeout(t.handleShowGameMenu,3e3);t.pcHasDamaged?e(r):(t.$refs.game.updateGameInfo("Your Turn!","rgb(43, 197, 87)"),t.$refs.game.enablePcBoard())}),r)};r(500)}},makePlTurn:function(e){var t=JSON.parse(e),r=t.x,a=t.y,n=this.pl.attack({player:this.pc,x:r,y:a});return this.$refs.game.updatePcBoard(e,n),!0===n||n.damagedShipData},makePcTurn:function(){var e=this.pc.attack({player:this.pl}),t=e.attackInfo,r=e.cord,a=r.x,n=r.y;return this.$refs.game.updatePlBoard(JSON.stringify({x:a,y:n}),t),!0===t||t.damagedShipData}}},Be=Ce,we=(r("034f"),r("7496")),Ee=r("a75b"),ke=Object(l["a"])(Be,n,i,!1,null,null,null),je=ke.exports;p()(ke,{VApp:we["a"],VContent:Ee["a"]});var Pe=r("f309");a["a"].use(Pe["a"]);var Ne=new Pe["a"]({theme:{dark:!0}});a["a"].config.productionTip=!1,new a["a"]({vuetify:Ne,render:function(e){return e(je)}}).$mount("#app")},"56e3":function(e,t,r){"use strict";var a=r("5357"),n=r.n(a);n.a},"5df3":function(e,t,r){},"8a23":function(e,t,r){},b363:function(e,t,r){"use strict";var a=r("3cda"),n=r.n(a);n.a},c562:function(e,t,r){}});
//# sourceMappingURL=app.4057cd58.js.map